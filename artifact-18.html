<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>فروشگاه آنلاین</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap');

:root {
--primary-color: #4CAF50;
--secondary-color: #f44336;
--text-color: #333;
--background-color: #f8f8f8;
--card-background: #ffffff;
--border-color: #ddd;
}

body {
font-family: 'Vazirmatn', sans-serif;
margin: 0;
padding: 0;
box-sizing: border-box;
background-color: var(--background-color);
color: var(--text-color);
line-height: 1.6;
min-height: 100vh;
overflow-x: hidden;
}

/* --- Welcome Screen --- */
#welcome-screen {
position: fixed;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
background: linear-gradient(to bottom, #e0f2f7, #c1e4f0);
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
text-align: center;
z-index: 1000;
transition: transform 0.7s ease-out, opacity 0.7s ease-out;
color: #2c3e50;
padding: 20px;
box-sizing: border-box;
}

#welcome-screen h1 {
font-size: 3em;
margin-bottom: 20px;
color: #2980b9;
text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

#welcome-screen p {
font-size: 1.2em;
margin-bottom: 30px;
max-width: 600px;
line-height: 1.8;
}

#enter-store-btn {
background-color: #27ae60;
color: white;
padding: 15px 30px;
border: none;
border-radius: 8px;
font-size: 1.2em;
cursor: pointer;
transition: background-color 0.3s ease, transform 0.2s ease;
box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

#enter-store-btn:hover {
background-color: #2ecc71;
transform: translateY(-2px);
}

/* --- Store/Checkout Container --- */
#store-checkout-container {
opacity: 0;
transform: translateY(100vh);
transition: transform 0.7s ease-out, opacity 0.7s ease-out;
position: relative;
min-height: 100vh;
box-sizing: border-box;
z-index: 1;
padding-top: 60px;
scroll-behavior: smooth;
}

header {
background-color: var(--primary-color);
color: white;
padding: 10px 20px;
text-align: center;
box-shadow: 0 2px 5px rgba(0,0,0,0.1);
position: fixed;
width: 100%;
top: 0;
left: 0;
z-index: 100;
display: flex;
justify-content: space-between;
align-items: center;
box-sizing: border-box;
}

header h1 {
margin: 0;
font-size: 1.8em;
}

.cart-icon-container {
position: relative;
cursor: pointer;
display: flex;
align-items: center;
gap: 5px;
}

.cart-icon {
font-size: 1.8em;
color: white;
}

.cart-count {
background-color: var(--secondary-color);
color: white;
border-radius: 50%;
padding: 3px 8px;
font-size: 0.8em;
position: absolute;
top: -5px;
right: -10px;
min-width: 20px;
text-align: center;
}

main {
padding: 20px;
max-width: 1200px;
margin: 0 auto;
}

.section {
background-color: var(--card-background);
border-radius: 8px;
box-shadow: 0 4px 10px rgba(0,0,0,0.05);
margin-bottom: 30px;
padding: 20px;
}

.section h2 {
color: var(--primary-color);
border-bottom: 2px solid var(--border-color);
padding-bottom: 10px;
margin-top: 0;
margin-bottom: 20px;
}

/* --- Product Grid --- */
#products-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
}

.product-card {
border: 1px solid var(--border-color);
border-radius: 8px;
padding: 15px;
text-align: center;
transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.product-card:hover {
transform: translateY(-5px);
box-shadow: 0 6px 15px rgba(0,0,0,0.1);
}

.product-card img {
max-width: 100%;
height: 150px;
object-fit: contain;
border-radius: 5px;
margin-bottom: 10px;
}

.product-card h3 {
margin-top: 0;
margin-bottom: 10px;
font-size: 1.2em;
color: var(--text-color);
}

.product-card p {
font-size: 1.1em;
color: var(--primary-color);
font-weight: bold;
margin-bottom: 15px;
}

.add-to-cart-btn {
background-color: var(--primary-color);
color: white;
border: none;
padding: 10px 15px;
border-radius: 5px;
cursor: pointer;
transition: background-color 0.3s ease;
font-size: 0.9em;
}

.add-to-cart-btn:hover {
background-color: #45a049;
}

/* --- Checkout Section --- */
#checkout-section {
padding: 20px;
margin-top: 20px;
}

#cart-items-summary {
margin-bottom: 20px;
}

.cart-item-summary {
display: flex;
justify-content: space-between;
align-items: center;
padding: 10px 0;
border-bottom: 1px dashed var(--border-color);
}

.cart-item-summary:last-child {
border-bottom: none;
}

.cart-item-summary .item-info {
flex-grow: 1;
}

.cart-item-summary .item-quantity {
font-weight: bold;
margin: 0 10px;
}

.cart-item-summary .item-price {
color: var(--primary-color);
font-weight: bold;
text-align: left;
min-width: 80px;
}

.cart-summary {
border-top: 2px solid var(--primary-color);
padding-top: 15px;
margin-top: 20px;
font-size: 1.2em;
font-weight: bold;
color: var(--text-color);
text-align: right;
}

.cart-summary span {
color: var(--secondary-color);
}

/* --- Customer Info Form --- */
.customer-info-form {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: #fcfcfc;
}

.customer-info-form label {
display: block;
margin-bottom: 8px;
font-weight: bold;
color: var(--text-color);
}

.customer-info-form input[type="text"],
.customer-info-form input[type="tel"],
.customer-info-form input[type="email"],
.customer-info-form textarea {
width: calc(100% - 20px);
padding: 10px;
margin-bottom: 15px;
border: 1px solid var(--border-color);
border-radius: 5px;
font-family: 'Vazirmatn', sans-serif;
font-size: 1em;
box-sizing: border-box; /* Include padding and border in the element's total width and height */
}

.customer-info-form textarea {
resize: vertical;
min-height: 80px;
}

.checkout-actions {
display: flex;
flex-direction: column;
align-items: center;
gap: 15px;
margin-top: 30px;
}

.button {
padding: 12px 25px;
border: none;
border-radius: 5px;
cursor: pointer;
font-size: 1.1em;
transition: background-color 0.3s ease, transform 0.2s ease;
width: 100%;
max-width: 300px;
box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.primary-button {
background-color: #007bff;
color: white;
}

.primary-button:hover {
background-color: #0056b3;
transform: translateY(-1px);
}

.secondary-button {
background-color: #6c757d;
color: white;
}

.secondary-button:hover {
background-color: #5a6268;
transform: translateY(-1px);
}

/* Responsive adjustments */
@media (max-width: 768px) {
header h1 {
font-size: 1.5em;
}
.product-card {
padding: 10px;
}
.product-card h3 {
font-size: 1.1em;
}
.product-card p {
font-size: 1em;
}
.add-to-cart-btn {
font-size: 0.8em;
padding: 8px 12px;
}
#welcome-screen h1 {
font-size: 2.5em;
}
#welcome-screen p {
font-size: 1em;
}
.button {
font-size: 1em;
padding: 10px 20px;
}
.customer-info-form input,
.customer-info-form textarea {
width: calc(100% - 20px); /* Adjust width for smaller screens */
}
}
</style>
</head>
<body>
<div id="welcome-screen">
<h1>به فروشگاه ما خوش آمدید!</h1>
<p>با بهترین محصولات و تخفیفات ویژه در خدمت شما هستیم. برای مشاهده محصولات و ثبت سفارش، دکمه زیر را کلیک کنید.</p>
<button id="enter-store-btn">ورود به فروشگاه</button>
</div>

<div id="store-checkout-container">
<header>
<h1>فروشگاه ما</h1>
<div class="cart-icon-container">
<span class="cart-icon">🛒</span>
<span id="cart-count" class="cart-count">0</span>
</div>
</header>

<main>
<section id="store-section" class="section">
<h2>محصولات ما</h2>
<div id="products-grid">
<!-- Products will be dynamically loaded here -->
</div>
</section>

<section id="checkout-section" class="section">
<h2>سبد خرید و تسویه حساب</h2>
<div id="cart-items-summary">
<!-- Cart items summary will be dynamically loaded here -->
<p id="empty-cart-message">سبد خرید شما خالی است.</p>
</div>
<div class="cart-summary">
<p>مجموع اقلام: <span id="total-items">0</span></p>
<p>مجموع قیمت: <span id="total-price">0</span> تومان</p>
</div>

<div class="customer-info-form">
<h3>اطلاعات گیرنده</h3>
<form id="customer-details-form">
<label for="full-name">نام و نام خانوادگی:</label>
<input type="text" id="full-name" name="fullName" required>

<label for="phone-number">شماره تماس:</label>
<input type="tel" id="phone-number" name="phoneNumber" required>

<label for="email">ایمیل (اختیاری):</label>
<input type="email" id="email" name="email">

<label for="address">آدرس کامل:</label>
<textarea id="address" name="address" rows="4" required></textarea>
</form>
</div>

<div class="checkout-actions">
<button id="place-order-btn" class="button primary-button">ثبت سفارش</button>
<button id="back-to-welcome-btn" class="button secondary-button">بازگشت به صفحه اصلی</button>
</div>
</section>
</main>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
const productsGrid = document.getElementById('products-grid');
const cartCountSpan = document.getElementById('cart-count');
const cartItemsSummaryDiv = document.getElementById('cart-items-summary');
const emptyCartMessage = document.getElementById('empty-cart-message');
const totalItemsSpan = document.getElementById('total-items');
const totalPriceSpan = document.getElementById('total-price');
const placeOrderBtn = document.getElementById('place-order-btn');
const customerDetailsForm = document.getElementById('customer-details-form');

// Elements for screen transitions
const enterStoreBtn = document.getElementById('enter-store-btn');
const welcomeScreen = document.getElementById('welcome-screen');
const storeCheckoutContainer = document.getElementById('store-checkout-container');
const backToWelcomeBtn = document.getElementById('back-to-welcome-btn');

// Sample Product Data
const products = [
{ id: 1, name: 'قهوه اتیوپی', price: 120000, image: 'https://via.placeholder.com/150/FF5733/FFFFFF?text=Coffee' },
{ id: 2, name: 'چای سبز ممتاز', price: 85000, image: 'https://via.placeholder.com/150/33FF57/FFFFFF?text=Green+Tea' },
{ id: 3, name: 'کتاب داستان', price: 70000, image: 'https://via.placeholder.com/150/3357FF/FFFFFF?text=Book' },
{ id: 4, name: 'ماگ سرامیکی', price: 45000, image: 'https://via.placeholder.com/150/F0F033/FFFFFF?text=Mug' },
{ id: 5, name: 'هدفون بی‌سیم', price: 350000, image: 'https://via.placeholder.com/150/8A2BE2/FFFFFF?text=Headphones' },
{ id: 6, name: 'لپ‌تاپ گیمینگ', price: 25000000, image: 'https://via.placeholder.com/150/20B2AA/FFFFFF?text=Laptop' },
{ id: 7, name: 'موس گیمینگ', price: 400000, image: 'https://via.placeholder.com/150/DAA520/FFFFFF?text=Mouse' },
{ id: 8, name: 'کیبورد مکانیکال', price: 700000, image: 'https://via.placeholder.com/150/FF69B4/FFFFFF?text=Keyboard' }
];

// Initialize cart from localStorage
let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];

// Function to render products
function renderProducts() {
productsGrid.innerHTML = '';
products.forEach(product => {
const productCard = document.createElement('div');
productCard.className = 'product-card';
productCard.innerHTML = `
<img src="${product.image}" alt="${product.name}">
<h3>${product.name}</h3>
<p>${product.price.toLocaleString()} تومان</p>
<button class="add-to-cart-btn" data-id="${product.id}">افزودن به سبد خرید</button>
`;
productsGrid.appendChild(productCard);
});

document.querySelectorAll('.add-to-cart-btn').forEach(button => {
button.addEventListener('click', (event) => {
const productId = parseInt(event.target.dataset.id);
addToCart(productId);
});
});
}

// Function to add item to cart
function addToCart(productId) {
const product = products.find(p => p.id === productId);
if (product) {
const existingItem = cart.find(item => item.id === productId);
if (existingItem) {
existingItem.quantity++;
} else {
cart.push({ ...product, quantity: 1 });
}
saveCart();
updateCartDisplay();
}
}

// Function to save cart to localStorage
function saveCart() {
localStorage.setItem('shoppingCart', JSON.stringify(cart));
}

// Function to update cart display (count, summary)
function updateCartDisplay() {
const totalItemsInCart = cart.reduce((sum, item) => sum + item.quantity, 0);
const totalPriceInCart = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

cartCountSpan.textContent = totalItemsInCart;
totalItemsSpan.textContent = totalItemsInCart;
totalPriceSpan.textContent = totalPriceInCart.toLocaleString();

renderCartSummary();
}

// Function to render cart summary in checkout section
function renderCartSummary() {
cartItemsSummaryDiv.innerHTML = ''; // Clear previous summary
if (cart.length === 0) {
emptyCartMessage.style.display = 'block';
} else {
emptyCartMessage.style.display = 'none';
cart.forEach(item => {
const itemDiv = document.createElement('div');
itemDiv.className = 'cart-item-summary';
itemDiv.innerHTML = `
<span class="item-info">${item.name}</span>
<span class="item-quantity">x${item.quantity}</span>
<span class="item-price">${(item.price * item.quantity).toLocaleString()} تومان</span>
`;
cartItemsSummaryDiv.appendChild(itemDiv);
});
}
}

// Place Order Button Logic
if (placeOrderBtn) {
placeOrderBtn.addEventListener('click', () => {
if (cart.length === 0) {
alert('سبد خرید شما خالی است. لطفا قبل از ثبت سفارش، محصولی اضافه کنید.');
return;
}

// Basic form validation
const fullName = document.getElementById('full-name').value;
const phoneNumber = document.getElementById('phone-number').value;
const email = document.getElementById('email').value; // Optional
const address = document.getElementById('address').value;

if (!fullName || !phoneNumber || !address) {
alert('لطفاً تمام فیلدهای اجباری (نام، شماره تماس، آدرس) را پر کنید.');
return;
}

const customerInfo = {
fullName: fullName,
phoneNumber: phoneNumber,
email: email,
address: address
};

alert('سفارش شما با موفقیت ثبت شد!');
console.log('Order Details:', {
customer: customerInfo,
cart: cart,
totalItems: cart.reduce((sum, item) => sum + item.quantity, 0),
totalPrice: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
});

// Clear cart and form after order
cart = [];
saveCart();
updateCartDisplay();
customerDetailsForm.reset(); // Clear form fields
});
}

// Screen transition logic: Welcome to Store/Checkout
if (enterStoreBtn && welcomeScreen && storeCheckoutContainer) {
enterStoreBtn.addEventListener('click', () => {
welcomeScreen.style.transform = 'translateY(-100vh)';
welcomeScreen.style.opacity = '0';
welcomeScreen.style.pointerEvents = 'none';

setTimeout(() => {
storeCheckoutContainer.style.transform = 'translateY(0)';
storeCheckoutContainer.style.opacity = '1';
}, 700);
});
}

// Screen transition logic: Back to Welcome Screen
if (backToWelcomeBtn && welcomeScreen && storeCheckoutContainer) {
backToWelcomeBtn.addEventListener('click', () => {
// Hide store/checkout container first
storeCheckoutContainer.style.transform = 'translateY(100vh)';
storeCheckoutContainer.style.opacity = '0';

// After hiding, show welcome screen
setTimeout(() => {
welcomeScreen.style.transform = 'translateY(0)';
welcomeScreen.style.opacity = '1';
welcomeScreen.style.pointerEvents = 'auto';
// Optionally clear cart and form when going back to welcome screen
cart = [];
saveCart();
updateCartDisplay();
customerDetailsForm.reset();
}, 700);
});
}

// Initial render
renderProducts();
updateCartDisplay();
});
</script>
</body>
</html>